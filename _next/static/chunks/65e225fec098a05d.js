(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,33525,(e,s,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"warnOnce",{enumerable:!0,get:function(){return a}});let a=e=>{}},84958,e=>{"use strict";function s(e,s){return 0===s?0:e/s}function t(e,s){return 0===s?0:e/s}function a(e,s){return 0===s?e:e/s}function r(e,s){return e-s}function l(e,s){return e-s}function i(e,s){let t={low:1,medium:2,high:3},a=t[e]*t[s];return a>=6?"critical":a>=4?"high":a>=2?"medium":"low"}e.s(["calculateCPI",()=>t,"calculateCV",()=>r,"calculateEAC",()=>a,"calculateSPI",()=>s,"calculateSV",()=>l,"getRiskLevel",()=>i])},63209,e=>{"use strict";let s=(0,e.i(75254).default)("circle-alert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);e.s(["AlertCircle",()=>s],63209)},87316,e=>{"use strict";let s=(0,e.i(75254).default)("calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);e.s(["Calendar",()=>s],87316)},12426,e=>{"use strict";let s=(0,e.i(75254).default)("dollar-sign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);e.s(["DollarSign",()=>s],12426)},25652,35408,e=>{"use strict";var s=e.i(75254);let t=(0,s.default)("trending-up",[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]]);e.s(["TrendingUp",()=>t],25652);let a=(0,s.default)("trending-down",[["path",{d:"M16 17h6v-6",key:"t6n2it"}],["path",{d:"m22 17-8.5-8.5-5 5L2 7",key:"x473p"}]]);e.s(["TrendingDown",()=>a],35408)},51645,e=>{"use strict";var s=e.i(43476),t=e.i(70065),a=e.i(27250),r=e.i(84958),l=e.i(25652),i=e.i(35408),n=e.i(12426),d=e.i(87316),c=e.i(78894);let x=(0,e.i(75254).default)("activity",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]]);var o=e.i(47163),m=e.i(22016);function h({data:e,color:t}){let a=Math.max(...e),r=Math.min(...e),l=a-r||1,i=e.map((s,t)=>{let a=t/(e.length-1)*100;return`${a},${100-(s-r)/l*100}`}).join(" ");return(0,s.jsx)("svg",{viewBox:"0 0 100 40",className:"w-20 h-8",preserveAspectRatio:"none",children:(0,s.jsx)("polyline",{points:i,fill:"none",stroke:t,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})}function u(){let e=(0,a.getDashboardStats)(),u=(0,a.getLatestEvm)("proj-1"),g=u?(0,r.calculateSPI)(u.earnedValue,u.plannedValue):1,p=u?(0,r.calculateCPI)(u.earnedValue,u.actualCost):1,j=a.evmData.map(e=>(0,r.calculateSPI)(e.earnedValue,e.plannedValue)),f=a.evmData.map(e=>(0,r.calculateCPI)(e.earnedValue,e.actualCost));return(0,s.jsxs)("div",{className:"grid gap-3 grid-cols-2 lg:grid-cols-4",children:[(0,s.jsx)(m.default,{href:"/analytics",children:(0,s.jsx)(t.Card,{className:"hover:shadow-md transition-shadow cursor-pointer border-l-4 border-l-primary",children:(0,s.jsxs)(t.CardContent,{className:"p-4",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)(n.DollarSign,{className:"h-4 w-4 text-primary"}),(0,s.jsx)(h,{data:a.evmData.map(e=>e.actualCost/1e6),color:"var(--primary)"})]}),(0,s.jsx)("p",{className:"text-2xl font-bold mt-2",children:(0,a.formatCurrency)(e.totalSpent)}),(0,s.jsxs)("p",{className:"text-xs text-muted-foreground",children:["of ",(0,a.formatCurrency)(e.totalBudget)]})]})})}),(0,s.jsx)(m.default,{href:"/analytics",children:(0,s.jsx)(t.Card,{className:(0,o.cn)("hover:shadow-md transition-shadow cursor-pointer border-l-4",g>=1?"border-l-green-500":"border-l-orange-500"),children:(0,s.jsxs)(t.CardContent,{className:"p-4",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)(d.Calendar,{className:(0,o.cn)("h-4 w-4",g>=1?"text-green-500":"text-orange-500")}),(0,s.jsx)(h,{data:j,color:g>=1?"#22c55e":"#f97316"})]}),(0,s.jsxs)("div",{className:"flex items-baseline gap-2 mt-2",children:[(0,s.jsx)("p",{className:"text-2xl font-bold",children:g.toFixed(2)}),(0,s.jsx)("span",{className:(0,o.cn)("text-xs font-medium flex items-center",g>=1?"text-green-600":"text-orange-600"),children:g>=1?(0,s.jsx)(l.TrendingUp,{className:"h-3 w-3"}):(0,s.jsx)(i.TrendingDown,{className:"h-3 w-3"})})]}),(0,s.jsx)("p",{className:"text-xs text-muted-foreground",children:"Schedule (SPI)"})]})})}),(0,s.jsx)(m.default,{href:"/analytics",children:(0,s.jsx)(t.Card,{className:(0,o.cn)("hover:shadow-md transition-shadow cursor-pointer border-l-4",p>=1?"border-l-green-500":"border-l-red-500"),children:(0,s.jsxs)(t.CardContent,{className:"p-4",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)(x,{className:(0,o.cn)("h-4 w-4",p>=1?"text-green-500":"text-red-500")}),(0,s.jsx)(h,{data:f,color:p>=1?"#22c55e":"#ef4444"})]}),(0,s.jsxs)("div",{className:"flex items-baseline gap-2 mt-2",children:[(0,s.jsx)("p",{className:"text-2xl font-bold",children:p.toFixed(2)}),(0,s.jsx)("span",{className:(0,o.cn)("text-xs font-medium flex items-center",p>=1?"text-green-600":"text-red-600"),children:p>=1?(0,s.jsx)(l.TrendingUp,{className:"h-3 w-3"}):(0,s.jsx)(i.TrendingDown,{className:"h-3 w-3"})})]}),(0,s.jsx)("p",{className:"text-xs text-muted-foreground",children:"Cost (CPI)"})]})})}),(0,s.jsx)(m.default,{href:"/risks",children:(0,s.jsx)(t.Card,{className:(0,o.cn)("hover:shadow-md transition-shadow cursor-pointer border-l-4",e.highRisks>2?"border-l-red-500":"border-l-yellow-500"),children:(0,s.jsxs)(t.CardContent,{className:"p-4",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)(c.AlertTriangle,{className:(0,o.cn)("h-4 w-4",e.highRisks>2?"text-red-500":"text-yellow-500")}),(0,s.jsx)("div",{className:"flex gap-1",children:[...Array(e.openRisks)].map((t,a)=>(0,s.jsx)("div",{className:(0,o.cn)("w-1.5 h-4 rounded-full",a<e.highRisks?"bg-red-500":"bg-yellow-400")},a))})]}),(0,s.jsx)("p",{className:"text-2xl font-bold mt-2",children:e.openRisks}),(0,s.jsxs)("p",{className:"text-xs text-muted-foreground",children:[e.highRisks," high priority"]})]})})})]})}e.s(["QuickMetrics",()=>u],51645)},2606,e=>{"use strict";var s=e.i(43476),t=e.i(70065),a=e.i(27250),r=e.i(47163),l=e.i(25652),i=e.i(35408);let n=(0,e.i(75254).default)("chevron-right",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);var d=e.i(22016);let c=["Preliminary Design","Design Development","Construction Documents","Construction","Closeout"];function x(){let e=a.projects.map(e=>({...e,stages:(0,a.getStagesByProject)(e.id)}));return(0,s.jsxs)(t.Card,{children:[(0,s.jsx)(t.CardHeader,{className:"pb-3",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)(t.CardTitle,{className:"text-base",children:"Projects Overview"}),(0,s.jsxs)(d.default,{href:"/analytics",className:"text-xs text-primary flex items-center hover:underline",children:["View Details ",(0,s.jsx)(n,{className:"h-3 w-3"})]})]})}),(0,s.jsxs)(t.CardContent,{className:"pt-0",children:[(0,s.jsx)("div",{className:"space-y-3",children:e.map(e=>{var t;let a,n,d=0===(a=e.stages.filter(e=>"upcoming"!==e.status)).length?{cost:0,schedule:0}:{cost:a.reduce((e,s)=>e+s.costVariance,0)/a.length,schedule:a.reduce((e,s)=>e+s.scheduleVariance,0)/a.length},x=(n=(t=e.stages).find(e=>"in-progress"===e.status),n?.name||t.find(e=>"completed"===e.status)?.name||"Not Started");return(0,s.jsxs)("div",{className:"flex items-center gap-4 p-3 rounded-lg bg-muted/30 hover:bg-muted/50 transition-colors",children:[(0,s.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,s.jsx)("p",{className:"text-sm font-medium truncate",children:e.name}),(0,s.jsx)("p",{className:"text-xs text-muted-foreground",children:x})]}),(0,s.jsx)("div",{className:"flex gap-0.5",children:c.map(t=>{let a=e.stages.find(e=>e.name===t);return(0,s.jsx)("div",{className:(0,r.cn)("w-6 h-2 rounded-sm first:rounded-l last:rounded-r",a?(e=>{switch(e){case"completed":return"bg-green-500";case"in-progress":return"bg-blue-500";default:return"bg-muted"}})(a.status):"bg-muted"),title:t},t)})}),(0,s.jsxs)("div",{className:"flex gap-3 text-xs",children:[(0,s.jsxs)("div",{className:(0,r.cn)("flex items-center",d.cost>=0?"text-green-600 dark:text-green-400":"text-red-600 dark:text-red-400"),children:[d.cost>=0?(0,s.jsx)(l.TrendingUp,{className:"h-3 w-3 mr-0.5"}):(0,s.jsx)(i.TrendingDown,{className:"h-3 w-3 mr-0.5"}),(0,s.jsxs)("span",{className:"font-medium",children:[Math.abs(d.cost).toFixed(1),"%"]})]}),(0,s.jsxs)("div",{className:(0,r.cn)("flex items-center",d.schedule>=0?"text-green-600 dark:text-green-400":"text-orange-600 dark:text-orange-400"),children:[d.schedule>=0?(0,s.jsx)(l.TrendingUp,{className:"h-3 w-3 mr-0.5"}):(0,s.jsx)(i.TrendingDown,{className:"h-3 w-3 mr-0.5"}),(0,s.jsxs)("span",{className:"font-medium",children:[Math.abs(d.schedule).toFixed(1),"%"]})]})]})]},e.id)})}),(0,s.jsxs)("div",{className:"flex items-center justify-between mt-3 pt-3 border-t text-xs text-muted-foreground",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsxs)("div",{className:"flex items-center gap-1",children:[(0,s.jsx)("div",{className:"w-2 h-2 rounded-sm bg-green-500"}),(0,s.jsx)("span",{children:"Done"})]}),(0,s.jsxs)("div",{className:"flex items-center gap-1",children:[(0,s.jsx)("div",{className:"w-2 h-2 rounded-sm bg-blue-500"}),(0,s.jsx)("span",{children:"Active"})]}),(0,s.jsxs)("div",{className:"flex items-center gap-1",children:[(0,s.jsx)("div",{className:"w-2 h-2 rounded-sm bg-muted"}),(0,s.jsx)("span",{children:"Pending"})]})]}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("span",{children:"Cost"}),(0,s.jsx)("span",{children:"|"}),(0,s.jsx)("span",{children:"Schedule"})]})]})]})]})}e.s(["AllProjectsStages",()=>x],2606)},45969,e=>{"use strict";var s=e.i(43476),t=e.i(70065),a=e.i(94179),r=e.i(27250),l=e.i(84958),i=e.i(78894),n=e.i(63209);let d=(0,e.i(75254).default)("info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);function c(){let e=r.risks.filter(e=>"open"===e.status),c=e.map(e=>({...e,level:(0,l.getRiskLevel)(e.probability,e.impact)})).filter(e=>"critical"===e.level||"high"===e.level).slice(0,3),x={high:e.filter(e=>"high"===e.probability||"high"===e.impact).length,medium:e.filter(e=>"medium"===e.probability&&"medium"===e.impact).length,low:e.filter(e=>"low"===e.probability&&"low"===e.impact).length};return(0,s.jsxs)(t.Card,{children:[(0,s.jsxs)(t.CardHeader,{children:[(0,s.jsx)(t.CardTitle,{children:"Risk Overview"}),(0,s.jsxs)(t.CardDescription,{children:[e.length," open risks across all projects"]})]}),(0,s.jsxs)(t.CardContent,{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"grid grid-cols-3 gap-2 text-center",children:[(0,s.jsxs)("div",{className:"rounded-lg bg-red-500/10 p-3",children:[(0,s.jsx)(i.AlertTriangle,{className:"mx-auto h-5 w-5 text-red-500"}),(0,s.jsx)("p",{className:"mt-1 text-lg font-bold text-red-600 dark:text-red-400",children:x.high}),(0,s.jsx)("p",{className:"text-xs text-muted-foreground",children:"High"})]}),(0,s.jsxs)("div",{className:"rounded-lg bg-yellow-500/10 p-3",children:[(0,s.jsx)(n.AlertCircle,{className:"mx-auto h-5 w-5 text-yellow-500"}),(0,s.jsx)("p",{className:"mt-1 text-lg font-bold text-yellow-600 dark:text-yellow-400",children:x.medium}),(0,s.jsx)("p",{className:"text-xs text-muted-foreground",children:"Medium"})]}),(0,s.jsxs)("div",{className:"rounded-lg bg-green-500/10 p-3",children:[(0,s.jsx)(d,{className:"mx-auto h-5 w-5 text-green-500"}),(0,s.jsx)("p",{className:"mt-1 text-lg font-bold text-green-600 dark:text-green-400",children:x.low}),(0,s.jsx)("p",{className:"text-xs text-muted-foreground",children:"Low"})]})]}),(0,s.jsxs)("div",{className:"border-t border-border pt-4",children:[(0,s.jsx)("h4",{className:"mb-3 text-sm font-medium",children:"Top Priority Risks"}),(0,s.jsx)("div",{className:"space-y-3",children:c.map(e=>(0,s.jsxs)("div",{className:"flex items-start justify-between gap-2",children:[(0,s.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,s.jsx)("p",{className:"text-sm font-medium truncate",children:e.title}),(0,s.jsx)("p",{className:"text-xs text-muted-foreground truncate",children:e.mitigation})]}),(e=>{switch(e){case"critical":return(0,s.jsx)(a.Badge,{className:"bg-red-500 text-white",children:"Critical"});case"high":return(0,s.jsx)(a.Badge,{className:"bg-orange-500 text-white",children:"High"});case"medium":return(0,s.jsx)(a.Badge,{className:"bg-yellow-500 text-black",children:"Medium"});default:return(0,s.jsx)(a.Badge,{className:"bg-green-500 text-white",children:"Low"})}})(e.level)]},e.id))})]})]})]})}e.s(["RiskSummary",()=>c],45969)},71623,e=>{"use strict";var s=e.i(43476),t=e.i(70065),a=e.i(94179),r=e.i(27250),l=e.i(75254);let i=(0,l.default)("flag",[["path",{d:"M4 22V4a1 1 0 0 1 .4-.8A6 6 0 0 1 8 2c3 0 5 2 7.333 2q2 0 3.067-.8A1 1 0 0 1 20 4v10a1 1 0 0 1-.4.8A6 6 0 0 1 16 16c-3 0-5-2-8-2a6 6 0 0 0-4 1.528",key:"1jaruq"}]]),n=(0,l.default)("refresh-cw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);var d=e.i(78894),c=e.i(63209);function x(){return(0,s.jsxs)(t.Card,{children:[(0,s.jsxs)(t.CardHeader,{children:[(0,s.jsx)(t.CardTitle,{children:"Recent Activity"}),(0,s.jsx)(t.CardDescription,{children:"Latest updates across all projects"})]}),(0,s.jsx)(t.CardContent,{children:(0,s.jsx)("div",{className:"space-y-4",children:r.activities.slice(0,5).map(e=>{let t,l,x=(0,r.getProjectById)(e.projectId);return(0,s.jsxs)("div",{className:"flex gap-3",children:[(0,s.jsx)("div",{className:"flex h-8 w-8 items-center justify-center rounded-full bg-muted",children:(e=>{switch(e){case"milestone":return(0,s.jsx)(i,{className:"h-4 w-4 text-green-500"});case"update":return(0,s.jsx)(n,{className:"h-4 w-4 text-blue-500"});case"risk":return(0,s.jsx)(d.AlertTriangle,{className:"h-4 w-4 text-yellow-500"});case"issue":return(0,s.jsx)(c.AlertCircle,{className:"h-4 w-4 text-red-500"});default:return(0,s.jsx)(n,{className:"h-4 w-4 text-muted-foreground"})}})(e.type)}),(0,s.jsxs)("div",{className:"flex-1 space-y-1",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between gap-2",children:[(0,s.jsx)("p",{className:"text-sm font-medium leading-none",children:e.title}),(e=>{switch(e){case"milestone":return(0,s.jsx)(a.Badge,{variant:"outline",className:"bg-green-500/10 text-green-700 dark:text-green-400 border-green-500/30",children:"Milestone"});case"update":return(0,s.jsx)(a.Badge,{variant:"outline",className:"bg-blue-500/10 text-blue-700 dark:text-blue-400 border-blue-500/30",children:"Update"});case"risk":return(0,s.jsx)(a.Badge,{variant:"outline",className:"bg-yellow-500/10 text-yellow-700 dark:text-yellow-400 border-yellow-500/30",children:"Risk"});case"issue":return(0,s.jsx)(a.Badge,{variant:"outline",className:"bg-red-500/10 text-red-700 dark:text-red-400 border-red-500/30",children:"Issue"});default:return(0,s.jsx)(a.Badge,{variant:"outline",children:e})}})(e.type)]}),(0,s.jsx)("p",{className:"text-xs text-muted-foreground",children:e.description}),(0,s.jsxs)("div",{className:"flex items-center gap-2 text-xs text-muted-foreground",children:[(0,s.jsx)("span",{children:x?.name}),(0,s.jsx)("span",{children:"â€¢"}),(0,s.jsx)("span",{children:(t=new Date(e.timestamp),0===(l=Math.floor((new Date().getTime()-t.getTime())/864e5))?"Today":1===l?"Yesterday":l<7?`${l} days ago`:t.toLocaleDateString("en-US",{month:"short",day:"numeric"}))})]})]})]},e.id)})})})]})}e.s(["RecentActivity",()=>x],71623)}]);